<!-- ***************************************************************************
* Copyright (c) 2013 IBM Corp.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
**************************************************************************** -->
<!DOCTYPE HTML>
<html>

<head>
  <title>Acme Air</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dijit/themes/claro/claro.css">
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dijit/themes/dijit.css">
  
  <script type="text/javascript" src="js/acmeair-common.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js" djConfig="parseOnLoad: true"></script>

  <script>
    dojo.require("dojo.parser");
	dojo.require("dojox.grid.DataGrid");
	dojo.require("dojo.data.ItemFileWriteStore");    
    dojo.require("dijit.form.Button");
    dojo.require("dijit.Dialog");
    dojo.require("dijit.form.TextBox");
    dojo.require("dijit.Toolbar");
    dojo.require("dijit.Declaration");
    
    dojo.require("dojo.cookie");
    
    dojo.addOnLoad(pageLoaded);
    
    function pageLoaded() {
    	updateLoggedInUserWelcome();
    	//createAndStartGrid();
    }
    
    
    function createAndStartGrid() {
    	var grid, store, dataStore;
    	
    	dojo.xhrGet({
			url: "rest/api/config/info",
			handleAs: "json",
			load: function(response, ioArgs) {
				var theData = { items : response };
				
		
				
				var tableData = '';
			 
					tableData += '<table border="1">';
					tableData += '<tr>';
					tableData += '   <th>JNDI key</th>';
					tableData += '   <th>Description</th>';		
					tableData += '</tr>';
				
					tableData += '<tr>';
					tableData += '   <td>'+theData.items[0].name+'</td>';
					tableData += '   <td>'+theData.items[0].description+'</td>';		
					tableData += '</tr>';
				
					tableData += '<tr>';
					tableData += '   <td>'+theData.items[1].name+'</td>';
					tableData += '   <td>'+theData.items[1].description+'</td>';		
					tableData += '</tr>';				
					tableData += '</table>';
				
    			document.getElementById('targetLoc').innerHTML=tableData;
				return false;
				//alert("Response is " + JSON.stringify(response));	
				//alert("data 1 is " + theData.items[0].name);
				//alert("data 2 is " + theData.items[1].name);
				
				/*
				var newStore = new dojo.data.ItemFileWriteStore({
					data : theData
				});
				var myNewItem = {name: theData.items[0].name, description: theData.items[0].description};
				newStore.newItem(myNewItem);
				var configGrid = dijit.byId("gridConfig");
				configGrid.setStore(newStore);
				*/
				
			},
			error: function(response, ioArgs) {
				alert(response);
			}
    	});
    }
    
    
	function formatFlightNumnber(data) {
		return data.name[0];
	}
  </script>
</head>

<body class="claro">


    
<div id="main">
	<br/>
	<header>
		<img src="images/AcmeAir.png" alt="Acme Air"/><br/>
		<div class="text-align: left">Flights, Baggage, and Loyalty all with a Smile</div><br/>
	</header>
	<div id="welcomeback"><div id="loggedinwelcome"></div>
	</div>
	<div id="main_content">
		<span data-dojo-type="dijit.Declaration" data-dojo-props='widgetClass:"ToolbarSectionStart", defaults:{ label: "Label"}'>
			<span data-dojo-type="dijit.ToolbarSeparator"></span><i>${label}:</i>
		</span>

		<div id="toolbar5" data-dojo-type="dijit.Toolbar">
			<div data-dojo-type="ToolbarSectionStart" data-dojo-props='label:"Actions"'></div>
			<div id="toolbar5.home" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="window.location='index.html'">Home</div>
			<div id="toolbar5.flights" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="window.location='flights.html'">Flights</div>
			<div id="toolbar5.checkin" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="window.location='checkin.html'">Checkin</div>
			<div id="toolbar5.login" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="showLoginDialog()">Login</div>
			<div id="toolbar5.logout" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="logout()">Logout</div>
			<div id="toolbar5.account" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="window.location='customerprofile.html'">Account</div>
			<div id="toolbar5.loaddb" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="loaddb()">Load the database</div>
			<div id="toolbar5.info" data-dojo-type="dijit.form.Button" data-dojo-props='showLabel:true' onClick="window.location='config.html'">Info</div>
		</div>
		
		<div class="content">
			<h1 style="margin: 15px 0 0 0;">Acme Air Configuration information</h1>
			<p>Data Services available</p>
			
			<script type="text/javascript">
				createAndStartGrid();
				</script> 
			<div id="targetLoc"></div>
		</div>
	</div>
	<footer>
		<p>Acme Air</p>
	</footer>
</div>

<p>&nbsp;</p>
</body>
</html>